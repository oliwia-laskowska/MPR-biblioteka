<!doctype html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Szczeg√≥≈Çy u≈ºytkownika</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root{
            --bg:#f7f7fb; --card:#fff; --text:#1c1c1c; --muted:#666;
            --border:#e6e6e6; --shadow:0 6px 24px rgba(0,0,0,.06);
            --radius:14px; --danger:#b00020;
        }
        body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
        .container{max-width:980px;margin:0 auto;padding:28px 18px 40px}
        .topbar{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:16px}
        h1{margin:0;font-size:26px}
        .subtitle{margin:6px 0 0;color:var(--muted);font-size:14px}
        .card{background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow);border-radius:var(--radius);padding:16px;margin-bottom:16px}
        .btn{display:inline-flex;align-items:center;gap:10px;text-decoration:none;border:1px solid var(--border);background:#fff;color:var(--text);
            border-radius:12px;padding:10px 12px;transition:transform .05s ease,box-shadow .15s ease,border-color .15s ease}
        .btn:hover{border-color:#cfcfcf;box-shadow:0 10px 24px rgba(0,0,0,.08);transform:translateY(-1px)}
        .error{color:var(--danger);margin:10px 0}
        .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
        .span-6{grid-column:span 6}
        .span-12{grid-column:span 12}
        @media (max-width:820px){.span-6,.span-12{grid-column:span 12}}
        .kv{list-style:none;padding:0;margin:0}
        .kv li{padding:10px 0;border-bottom:1px solid var(--border)}
        .kv li:last-child{border-bottom:none}
        .k{color:var(--muted);font-size:12px;text-transform:uppercase;letter-spacing:.06em}
        .v{font-size:16px;font-weight:600;margin-top:4px}
        .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:12px;color:var(--muted)}
        .row{margin:12px 0}
        label{display:block;margin-bottom:6px;font-weight:600}
        input{width:100%;max-width:520px;padding:10px 12px;border-radius:12px;border:1px solid var(--border);font-size:14px}
        input:focus{outline:none;border-color:#cfcfcf;box-shadow:0 0 0 4px rgba(0,0,0,.04)}
        button.primary{border:1px solid var(--border);background:#111;color:#fff;border-radius:12px;padding:10px 14px;cursor:pointer;font-weight:600}
        button.primary:hover{opacity:.95}
        .danger{background:#fff;border:1px solid #f2c3c8;color:var(--danger);border-radius:12px;padding:8px 12px;cursor:pointer}
        .danger:hover{box-shadow:0 10px 24px rgba(176,0,32,.10)}
    </style>
</head>
<body>

<div class="container">
    <div class="topbar">
        <div>
            <h1>üë§ Szczeg√≥≈Çy u≈ºytkownika</h1>
            <p class="subtitle">Profil u≈ºytkownika jest relacjƒÖ 1:1 (User ‚Üî UserProfile).</p>
        </div>
        <a class="btn" th:href="@{/web/users}">‚Üê Lista u≈ºytkownik√≥w</a>
    </div>

    <div class="error" th:if="${errorMessage}" th:text="${errorMessage}"></div>

    <div class="grid">

        <section class="card span-6">
            <h2 style="margin:0 0 12px;">Dane u≈ºytkownika</h2>
            <ul class="kv">
                <li>
                    <div class="k">ID</div>
                    <div class="v" th:text="${user.id}">1</div>
                </li>
                <li>
                    <div class="k">Email</div>
                    <div class="v mono" th:text="${user.email}">mail</div>
                </li>
                <li>
                    <div class="k">Imiƒô i nazwisko</div>
                    <div class="v" th:text="${user.fullName}">Jan Kowalski</div>
                </li>
            </ul>
        </section>

        <!-- Profil -->
        <section class="card span-6">
            <h2 style="margin:0 0 12px;">Profil (1:1)</h2>

            <!-- je≈õli profil istnieje -->
            <div th:if="${user.profile != null}">
                <ul class="kv">
                    <li>
                        <div class="k">ID profilu</div>
                        <div class="v" th:text="${user.profile.id}">1</div>
                    </li>
                    <li>
                        <div class="k">Adres</div>
                        <div class="v" th:text="${user.profile.address}">adres</div>
                    </li>
                    <li>
                        <div class="k">Telefon</div>
                        <div class="v" th:text="${user.profile.phone}">tel</div>
                    </li>
                </ul>

                <form th:action="@{/web/profiles/{id}/delete(id=${user.profile.id})}" method="post" style="margin-top:14px;">
                    <button class="danger" type="submit" onclick="return confirm('UsunƒÖƒá profil?')">
                        Usu≈Ñ profil
                    </button>
                </form>
            </div>

            <!-- je≈õli profil nie istnieje -->
            <div th:if="${user.profile == null}">
                <p style="margin:0 0 12px; color:var(--muted);">
                    U≈ºytkownik nie ma profilu. Utw√≥rz go poni≈ºej:
                </p>

                <form th:action="@{/web/users/{id}/profile(id=${user.id})}" th:object="${profile}" method="post">

                    <div class="row">
                        <label for="address">Adres</label>
                        <input id="address" type="text" th:field="*{address}" placeholder="np. Warszawa, ul. ...">
                        <div class="error" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div>
                    </div>

                    <div class="row">
                        <label for="phone">Telefon</label>
                        <input id="phone" type="text" th:field="*{phone}" placeholder="np. 500 600 700">
                        <div class="error" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
                    </div>

                    <button class="primary" type="submit">Utw√≥rz profil</button>
                </form>
            </div>

        </section>

    </div>
</div>

</body>
</html>
